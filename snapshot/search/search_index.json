{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"index.html","title":"Home","text":""},{"location":"index.html#what-is-it","title":"What is it?","text":"<p>...</p> <p> </p>"},{"location":"developer-guide/contribution.html","title":"Contribution","text":"<p>There are several ways in which you may contribute to this project.</p> <ul> <li>File issues</li> <li>Submit a pull requests</li> </ul>"},{"location":"developer-guide/contribution.html#found-a-bug-or-missing-feature","title":"Found a bug or missing feature?","text":"<p>Please file an issue in our issue tracking system.</p>"},{"location":"developer-guide/contribution.html#submit-a-pull-request","title":"Submit a Pull Request","text":"<p>If you found a solution to an open issue and implemented it, we would be happy to add your contribution in the code base. For doing so, please create a pull request. Prior to that, please make sure you:</p> <ul> <li>rebase against the <code>develop</code> branch</li> <li>stick to project coding conventions</li> <li>added test cases for the problem you are solving</li> <li>added docs, describing the change</li> <li>generally comply with codacy report</li> </ul>"},{"location":"developer-guide/project-setup.html","title":"Project Setup","text":"<p>If you are interested in developing and building the project please follow the following instruction.</p>"},{"location":"developer-guide/project-setup.html#version-control","title":"Version control","text":"<p>To get sources of the project, please execute:</p> <pre><code>git clone https://github.com/holunda-io/axon-avro.git\ncd axon-avro\n</code></pre> <p>We are using gitflow in our git SCM. That means that you should start from <code>develop</code> branch, create a <code>feature/&lt;name&gt;</code> out of it and once it is completed create a pull request containing it. Please squash your commits before submitting and use semantic commit messages, if possible.</p>"},{"location":"developer-guide/project-setup.html#project-build","title":"Project Build","text":"<p>Perform the following steps to get a development setup up and running.</p> <pre><code>./mvnw clean install\n</code></pre>"},{"location":"developer-guide/project-setup.html#integration-tests","title":"Integration Tests","text":"<p>By default, the build command will ignore the run of <code>failsafe</code> Maven plugin executing the integration tests (usual JUnit tests with class names ending with ITest). In order to run integration tests, please call from your command line:</p> <pre><code>./mvnw integration-test failsafe:verify -Pitest\n</code></pre>"},{"location":"developer-guide/project-setup.html#build-documentation","title":"Build Documentation","text":"<p>We are using MkDocs for generation of a static site documentation and rely on Markdown as much as possible. MkDocs is written in Python 3 and needs to be installed on your machine. For the installation please run the following command from your command line:</p> <pre><code>python3 -m pip install --upgrade pip\npython3 -m pip install -r ./docs/requirements.txt\n</code></pre> <p>For creation of documentation, please run:</p> <pre><code>mkdocs build\n</code></pre> <p>The docs are generated into <code>site</code> directory.</p> <p>Note</p> <p>If you want to develop your docs in 'live' mode, run <code>mkdocs serve</code> and access the http://localhost:8000/axon-avro/ from your browser.</p>"},{"location":"developer-guide/project-setup.html#continuous-integration","title":"Continuous Integration","text":"<p>Travis CI is building all branches on commit hook. In addition, a private-hosted Jenkins CI is used to build the releases.</p>"},{"location":"developer-guide/project-setup.html#release-management","title":"Release Management","text":"<p>Release management has been set up for use of Sonatype Nexus (= Maven Central)</p>"},{"location":"developer-guide/project-setup.html#what-modules-get-deployed-to-repository","title":"What modules get deployed to repository","text":"<p>Every module is enabled by default. If you want to change this, please provide the property</p> <pre><code>&lt;maven.deploy.skip&gt;true&lt;/maven.deploy.skip&gt;\n</code></pre> <p>inside the corresponding <code>pom.xml</code>. Currently, all examples are EXCLUDED from publication into Maven Central.</p>"},{"location":"developer-guide/project-setup.html#trigger-new-release","title":"Trigger new release","text":"<p>Warning</p> <p>This operation requires special permissions.</p> <p>We use gitflow for development (see A successful git branching model for more details). You could use gitflow with native git commands, but then you would have to change the versions in the poms manually. Therefore, we use the mvn gitflow plugin, which handles this and other things nicely.</p> <p>You can build a release with:</p> <pre><code>./mvnw gitflow:release-start\n./mvnw gitflow:release-finish\n</code></pre> <p>This will update the versions in the <code>pom.xml</code> s accordingly and push the release tag to the <code>master</code> branch and update the <code>develop</code> branch for the new development version.</p>"},{"location":"developer-guide/project-setup.html#trigger-a-deploy","title":"Trigger a deploy","text":"<p>Warning</p> <p>This operation requires special permissions.</p> <p>Currently, CI allows for deployment of artifacts to Maven Central and is executed using github actions. This means, that a push to <code>master</code> branch will start the corresponding build job, and if successful the artifacts will get into <code>Staging Repositories</code> of OSS Sonatype without manual intervention.</p>"},{"location":"developer-guide/project-setup.html#run-deploy-from-local-machine","title":"Run deploy from local machine","text":"<p>Warning</p> <p>This operation requires special permissions.</p> <p>If you still want to execute the deployment from your local machine, you need to have GPG keys at place and to execute the following command on the <code>master</code> branch:</p> <pre><code>export GPG_KEYNAME=\"&lt;keyname&gt;\"\nexport GPG_PASSPHRASE=\"&lt;secret&gt;\"\n./mvnw clean deploy -B -DskipTests -DskipExamples -Prelease -Dgpg.keyname=\"$GPG_KEYNAME\" -Dgpg.passphrase=\"$GPG_PASSPHRASE\"\n</code></pre>"},{"location":"developer-guide/project-setup.html#release-to-public-repositories","title":"Release to public repositories","text":"<p>Warning</p> <p>This operation requires special permissions.</p> <p>The deployment job will publish the artifacts to Nexus OSS staging repositories. Currently, all snapshots get into OSS Sonatype Snapshot repository and all releases to Maven Central automatically.</p>"},{"location":"features/serializer.html","title":"Avro Axon Serializer","text":""},{"location":"features/serializer.html#features","title":"Features","text":"<p>The Axon Avro Serializer can be used as a serializer in your application using Axon Framework. In doing so, it will serialize and de-serialize  Axon Framework messages (commands, command response, events, queries, query responses) using Apache Avro Single Object Encoded format. In case you use  Axon Server as Event store, the payload events will be stored in Apache Avro on disk. If you are using a different store, it will store the payload  of events in the event store respectively.</p> <p>The serializer supports classes created using Apache Avro Java Generator (Maven Plugin) and Kotlin Data classes compatible with KotlinX Serialization.  The serializer requires a schema resolver to operate. The latter must contain schemas of all messages and classes which are about to be serialized.</p>"},{"location":"features/serializer.html#limitations-out-of-scope","title":"Limitations / Out of scope","text":"<p>Currently, we believe that Axon Messages should be serialized using Apache Avro. Axon Framework serializes some other data too. For example  Tokens, Snapshots, Sagas are also serialized, but we believe that usage of Axon Avro this has limited / no value and therefor no support for  this is provided.</p> <p>As a practical implication, you can use Avro Axon Serializer to serialize messages and events, but can't use it a sa default serializer in  your application.</p>"},{"location":"features/serializer.html#how-to-use-in-a-springboot-project","title":"How to use in a SpringBoot project","text":"<p>In order to use the serializer in a SpringBoot project, you will need to add the following dependency to your project:</p> <pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.holixon.axon.avro&lt;/groupId&gt;\n  &lt;artifactId&gt;axon-avro-serializer-spring-autoconfigure&lt;/artifactId&gt;\n  &lt;version&gt;${axon-avro-serializer.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <p>On a configuration of your SpringBoot application please provide the following Bean factories:</p> <pre><code>@Configuration\n@EnableAxonAvroSerializer\nclass AvroNoServerConfiguration {\n\n  @Bean\n  @Qualifier(\"eventSerializer\")\n  fun eventSerializer(builder: AvroSerializer.Builder): Serializer = builder.build()\n\n  @Bean\n  @Qualifier(\"messageSerializer\")\n  fun messageSerializer(builder: AvroSerializer.Builder): Serializer = builder.build()\n\n  @Bean\n  fun schemaResolver(): AvroSchemaResolver {\n    // return a schema resolver.\n    val schemas = listOf(\n      AvroSchema(avro4k.schema(MyKotlinXEvent.serializer())) \n    )\n    return avroSchemaResolver(schemas)\n  }\n}\n</code></pre> <p>By doing so, you configure the message and event serializers to be Axon Avro serializers.</p>"},{"location":"features/serializer.html#how-to-use-without-springboot","title":"How to use without SpringBoot","text":"<p>// TODO -&gt; describe usage</p> <pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.holixon.axon.avro&lt;/groupId&gt;\n  &lt;artifactId&gt;axon-avro-serializer-spring-core&lt;/artifactId&gt;\n  &lt;version&gt;${axon-avro-serializer.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"features/server-plugin.html","title":"Avro Axon Server Plugin","text":"<p>The Axon Server Plugin is useful to display the content of the events stored in Axon Server store encoded with Apache Avro Single  Object Encoded format.</p>"},{"location":"features/server-plugin.html#how-to-install-manually","title":"How to install manually","text":"<ol> <li>_</li> </ol>"},{"location":"features/server-plugin.html#how-to-install-using","title":"How to install using","text":""},{"location":"reference/index.html","title":"How to use","text":"<p>If you are using Spring Boot, please add the following dependency to your Maven pom:</p> <pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.holixon.axon.avro&lt;/groupId&gt;\n  &lt;artifactId&gt;axon-avro-serializer-spring-autoconfigure&lt;/artifactId&gt;\n  &lt;version&gt;${axon-avro.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <p>To activate the serializer please add the following to your configuration:</p> <pre><code>@Configuration\n@EnableAxonAvroSerializer\nclass AvroSerializerConfiguration {\n\n  @Bean\n  @Primary\n  fun defaultSerializer(): Serializer = JacksonSerializer.builder().build()\n\n  @Bean\n  @Qualifier(\"eventSerializer\")\n  fun eventSerializer(builder: AvroSerializer.Builder): Serializer = builder.build()\n\n  @Bean\n  @Qualifier(\"messageSerializer\")\n  fun messageSerializer(builder: AvroSerializer.Builder): Serializer = builder.build()\n\n  @Bean\n  fun schemaResolver() = BankAccountSchemas.schemaResolver\n\n}\n</code></pre>"},{"location":"reference/disk_usage.html","title":"Disk Usage","text":"<p>If your application is using Event Sourcing as persistence strategy, the total disk space usage of your event store and the serialization  speed might be an interesting parameters. Assuming that you are using some event store technology (Axon Server or any other Event Store of your choice),  this values depends on the serialization format. Currently, Axon Framework supports the following serialization formats: Java Binary, JSON via Jackson,  CBOR via Jackson and XML via XStream. If you are planing to use this extension, you are extending this list by Avro Single Object Encoded.</p> <p>In order to use Avro Encoding, you have to rely on either KotlinX Serialization based on avro4k or on Avro Java library using a generator creating you classes from you Avro schema which are subclassing <code>SpecificRecordBase</code>.</p> <p>In this section, we publish results we conducted during comparison of the formats above. Since Java Binary serialization should not be used in any productive systems due to security considerations, we excluded it from the test and conducted comparison on XML, JSON, CBOR and Avro.</p>"},{"location":"reference/disk_usage.html#test-setup","title":"Test setup","text":"<ul> <li>Created a small banking application, allowing to create account and deposit and withdraw money. It consists of three commands, one aggregate,   three events and a projection.</li> <li>The application has an API to batch creation of accounts and executing operations on them</li> <li>For every account, we executed money transfer operations in pairs (withdraws, disposals)</li> <li>Results in 2 * M + 1 events per account</li> <li>Running with N=10 accounts, M=100 operation pairs, resulting in 10 * 201 = 2010 events per run</li> <li>The total test was to execute 5 runs resulting in 10050 events in the Axon Server</li> <li>For Axon Server we used a docker-version version <code>axoniq/axonserver:2023.2.6-jdk-17</code> with small event segment files 977kb (1000000 bytes)</li> <li>The test application and Axon Server were running on the same machine</li> <li>Measured time for each run (The test was executed on Ubuntu 22.04.4 LTS running on a Lenovo P1 with Intel\u00ae Core\u2122 i7-8850H CPU @ 2.60GHz \u00d7 12, 32,0 GiB, SSD M.2 PCIe NVMe)</li> <li>Checked file system and calculate storage requirements</li> <li>We intentionally used a special type (<code>Money</code>) to simulate a slightly more complex scenario than just plain events with native types supported by any format</li> </ul>"},{"location":"reference/disk_usage.html#test-results","title":"Test results","text":"Format Average run (ms) Time Factor Average Event size (bytes) Size Factor Notes XStream 40381 1.588 1340 4.253 No additional configuration. Jackson JSON 25456 1.001 355 1.227 Custom Object Mapper settings for Money. Jackson CBOR 25423 1.000 344 1.092 Custom Object Mapper settings for Money. Avro KotlinX 82162 3.232 315 1.000 Custom type conversions for Money. Avro Java 136087 5.323 315 1.000 Custom type conversions for Money. <p>For Avro we were using Single Object Encoded format (binary format with schema reference) for both KotlinX Serialized and Java generated  (<code>SpecificRecordBase</code>) classes. This results in the identical representation (with same disk space consumption). </p> <p>You can find the detailed information about the test runs below.</p>"},{"location":"reference/disk_usage.html#xstream","title":"XStream","text":""},{"location":"reference/disk_usage.html#timings","title":"Timings","text":"<ol> <li>Time: 40690ms</li> <li>Time: 40438ms</li> <li>Time: 40162ms</li> <li>Time: 40310ms</li> <li>Time: 40308ms</li> </ol> <p>Resulting in an average of 40381ms.</p>"},{"location":"reference/disk_usage.html#disk-space-usage","title":"Disk space usage","text":"<pre><code>-rw-r--r-- 1 root root 1000000 Jul 12 22:46 00000000000000000000.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:47 00000000000000000746.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:47 00000000000000001492.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:48 00000000000000002238.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:48 00000000000000002984.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:48 00000000000000003730.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:49 00000000000000004476.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:49 00000000000000005222.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:50 00000000000000005968.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:50 00000000000000006714.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:50 00000000000000007460.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:51 00000000000000008206.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:51 00000000000000008952.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:51 00000000000000009698.events\n</code></pre>"},{"location":"reference/disk_usage.html#representation-in-the-event-store","title":"Representation in the event store","text":"<p>Just for reference, this is how it would look like if we are not using Moneta library, but just encode amount as Integer.</p> <pre><code>&lt;bankaccount.event.BankAccountCreated&gt;\n  &lt;accountId&gt;55eeba20-cdae-40fd-b418-b0f7b38cb676&lt;/accountId&gt;\n  &lt;initialBalance&gt;100&lt;/initialBalance&gt;\n&lt;/bankaccount.event.BankAccountCreated&gt;\n</code></pre> <p>BankAccountCreated: <pre><code>&lt;bankaccount.event.BankAccountCreated&gt;\n  &lt;accountId&gt;bda57038-0f52-46aa-ab1f-8ee4d0b81768&lt;/accountId&gt;\n  &lt;initialBalance&gt;\n    &lt;currency class=\"org.javamoney.moneta.spi.JDKCurrencyAdapter\"&gt;\n      &lt;baseCurrency&gt;EUR&lt;/baseCurrency&gt;\n      &lt;context&gt;\n        &lt;data&gt;\n          &lt;entry&gt;\n            &lt;string&gt;provider&lt;/string&gt;\n            &lt;string&gt;java.util.Currency&lt;/string&gt;\n          &lt;/entry&gt;\n        &lt;/data&gt;\n      &lt;/context&gt;\n    &lt;/currency&gt;\n    &lt;monetaryContext&gt;\n      &lt;data&gt;\n        &lt;entry&gt;\n          &lt;string&gt;amountType&lt;/string&gt;\n          &lt;java-class&gt;org.javamoney.moneta.Money&lt;/java-class&gt;\n        &lt;/entry&gt;\n        &lt;entry&gt;\n          &lt;string&gt;precision&lt;/string&gt;\n          &lt;int&gt;256&lt;/int&gt;\n        &lt;/entry&gt;\n        &lt;entry&gt;\n          &lt;string&gt;java.lang.Class&lt;/string&gt;\n          &lt;java-class&gt;org.javamoney.moneta.Money&lt;/java-class&gt;\n        &lt;/entry&gt;\n        &lt;entry&gt;\n          &lt;string&gt;java.math.RoundingMode&lt;/string&gt;\n          &lt;java.math.RoundingMode&gt;HALF_EVEN&lt;/java.math.RoundingMode&gt;\n        &lt;/entry&gt;\n      &lt;/data&gt;\n    &lt;/monetaryContext&gt;\n    &lt;number&gt;100&lt;/number&gt;\n  &lt;/initialBalance&gt;\n&lt;/bankaccount.event.BankAccountCreated&gt;\n</code></pre></p> <p>MoneyDeposited <pre><code>&lt;bankaccount.event.MoneyDeposited&gt;\n  &lt;accountId&gt;bda57038-0f52-46aa-ab1f-8ee4d0b81768&lt;/accountId&gt;\n  &lt;amount&gt;\n    &lt;currency class=\"org.javamoney.moneta.spi.JDKCurrencyAdapter\"&gt;\n      &lt;baseCurrency&gt;EUR&lt;/baseCurrency&gt;\n      &lt;context&gt;\n        &lt;data&gt;\n          &lt;entry&gt;\n            &lt;string&gt;provider&lt;/string&gt;\n            &lt;string&gt;java.util.Currency&lt;/string&gt;\n          &lt;/entry&gt;\n        &lt;/data&gt;\n      &lt;/context&gt;\n    &lt;/currency&gt;\n    &lt;monetaryContext&gt;\n      &lt;data&gt;\n        &lt;entry&gt;\n          &lt;string&gt;amountType&lt;/string&gt;\n          &lt;java-class&gt;org.javamoney.moneta.Money&lt;/java-class&gt;\n        &lt;/entry&gt;\n        &lt;entry&gt;\n          &lt;string&gt;precision&lt;/string&gt;\n          &lt;int&gt;256&lt;/int&gt;\n        &lt;/entry&gt;\n        &lt;entry&gt;\n          &lt;string&gt;java.lang.Class&lt;/string&gt;\n          &lt;java-class&gt;org.javamoney.moneta.Money&lt;/java-class&gt;\n        &lt;/entry&gt;\n        &lt;entry&gt;\n          &lt;string&gt;java.math.RoundingMode&lt;/string&gt;\n          &lt;java.math.RoundingMode&gt;HALF_EVEN&lt;/java.math.RoundingMode&gt;\n        &lt;/entry&gt;\n      &lt;/data&gt;\n    &lt;/monetaryContext&gt;\n    &lt;number&gt;19&lt;/number&gt;\n  &lt;/amount&gt;\n&lt;/bankaccount.event.MoneyDeposited&gt;\n</code></pre></p> <p>MoneyWithdrawn <pre><code>&lt;bankaccount.event.MoneyWithdrawn&gt;\n  &lt;accountId&gt;bda57038-0f52-46aa-ab1f-8ee4d0b81768&lt;/accountId&gt;\n  &lt;amount&gt;\n    &lt;currency class=\"org.javamoney.moneta.spi.JDKCurrencyAdapter\"&gt;\n      &lt;baseCurrency&gt;EUR&lt;/baseCurrency&gt;\n      &lt;context&gt;\n        &lt;data&gt;\n          &lt;entry&gt;\n            &lt;string&gt;provider&lt;/string&gt;\n            &lt;string&gt;java.util.Currency&lt;/string&gt;\n          &lt;/entry&gt;\n        &lt;/data&gt;\n      &lt;/context&gt;\n    &lt;/currency&gt;\n    &lt;monetaryContext&gt;\n      &lt;data&gt;\n        &lt;entry&gt;\n          &lt;string&gt;amountType&lt;/string&gt;\n          &lt;java-class&gt;org.javamoney.moneta.Money&lt;/java-class&gt;\n        &lt;/entry&gt;\n        &lt;entry&gt;\n          &lt;string&gt;precision&lt;/string&gt;\n          &lt;int&gt;256&lt;/int&gt;\n        &lt;/entry&gt;\n        &lt;entry&gt;\n          &lt;string&gt;java.lang.Class&lt;/string&gt;\n          &lt;java-class&gt;org.javamoney.moneta.Money&lt;/java-class&gt;\n        &lt;/entry&gt;\n        &lt;entry&gt;\n          &lt;string&gt;java.math.RoundingMode&lt;/string&gt;\n          &lt;java.math.RoundingMode&gt;HALF_EVEN&lt;/java.math.RoundingMode&gt;\n        &lt;/entry&gt;\n      &lt;/data&gt;\n    &lt;/monetaryContext&gt;\n    &lt;number&gt;9&lt;/number&gt;\n  &lt;/amount&gt;\n&lt;/bankaccount.event.MoneyWithdrawn&gt;\n</code></pre></p>"},{"location":"reference/disk_usage.html#jackson-json","title":"Jackson JSON","text":""},{"location":"reference/disk_usage.html#timings_1","title":"Timings","text":"<ol> <li>Time: 25297ms</li> <li>Time: 25351ms</li> <li>Time: 25070ms</li> <li>Time: 25425ms</li> <li>Time: 26140ms</li> </ol> <p>Resulting in an average of 25456ms.</p>"},{"location":"reference/disk_usage.html#disk-usage","title":"Disk usage","text":"<pre><code>-rw-r--r-- 1 root root 1000000 Jul 12 22:25 00000000000000000000.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:26 00000000000000002817.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:29 00000000000000005634.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:29 00000000000000008451.events\n</code></pre> <p>In order to be able to serialize Money type, an additional <code>jackson-datatype-money</code> library was required and the corresponding module needed to be registered. </p> <p>BankAccountCreated: <pre><code>{\"accountId\":\"702bdae0-d507-4664-8ee8-d8d7e3ff5778\",\"initialBalance\":{\"amount\":100.00,\"currency\":\"EUR\"}}\n</code></pre> MoneyDeposited: <pre><code>{\"accountId\":\"702bdae0-d507-4664-8ee8-d8d7e3ff5778\",\"amount\":{\"amount\":19.00,\"currency\":\"EUR\"}}\n</code></pre> MoneyWithdrawn: <pre><code>{\"accountId\":\"702bdae0-d507-4664-8ee8-d8d7e3ff5778\",\"amount\":{\"amount\":10.00,\"currency\":\"EUR\"}}\n</code></pre></p>"},{"location":"reference/disk_usage.html#jackson-cbor","title":"Jackson CBOR","text":""},{"location":"reference/disk_usage.html#timings_2","title":"Timings","text":"<ol> <li>Time: 26427ms</li> <li>Time: 25224ms</li> <li>Time: 25002ms</li> <li>Time: 25120ms</li> <li>Time: 25343ms</li> </ol> <p>Resulting in an average of 25423ms.</p>"},{"location":"reference/disk_usage.html#disk-usage_1","title":"Disk usage","text":"<p><pre><code>-rw-r--r-- 1 root root 1000000 Jul 12 22:13 00000000000000000000.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:17 00000000000000002904.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:18 00000000000000005808.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:18 00000000000000008712.events\n</code></pre> In order to be able to serialize Money type, an additional <code>jackson-datatype-money</code> library was required and the corresponding module needed to be registered.</p> <p>BankAccountCreated <pre><code>\ufffdiaccountIdx$9b4b8c26-d16f-4ce3-b5ab-62beb9b711d1ninitialBalance\ufffdfamount\u0102!\u0019'\u0010hcurrencycEUR\ufffd\ufffd\n</code></pre></p> <p>MoneyDeposited <pre><code>\ufffdiaccountIdx$9b4b8c26-d16f-4ce3-b5ab-62beb9b711d1famount\ufffdfamount\u0102!\u0019\ufffdhcurrencycEUR\ufffd\ufffd\n</code></pre></p> <p>MoneyWithdrawn <pre><code>\ufffdiaccountIdx$9b4b8c26-d16f-4ce3-b5ab-62beb9b711d1famount\ufffdfamount\u0102!\u0019\ufffdhcurrencycEUR\ufffd\ufffd\n</code></pre></p>"},{"location":"reference/disk_usage.html#avro-with-java-generated-classes","title":"Avro with Java generated classes","text":""},{"location":"reference/disk_usage.html#timings_3","title":"Timings","text":"<ol> <li>Time: 135915ms</li> <li>Time: 136152ms</li> <li>Time: 136598ms</li> <li>Time: 135525ms</li> <li>Time: 136245ms</li> </ol> <p>Resulting in an average of 136087ms.</p>"},{"location":"reference/disk_usage.html#disk-usage_2","title":"Disk usage","text":"<pre><code>-rw-r--r-- 1 root root 1000000 Jul 12 23:37 00000000000000000000.events\n-rw-r--r-- 1 root root 1000000 Jul 12 23:42 00000000000000003165.events\n-rw-r--r-- 1 root root 1000000 Jul 12 23:46 00000000000000006330.events\n-rw-r--r-- 1 root root 1000000 Jul 12 23:47 00000000000000009495.events\n</code></pre> <p>BankAccountCreated <pre><code>\ufffd\u0001K\ufffd\ufffdX{lH27cd7b01-1515-4d4f-998e-4df0e08e44a7\u0014100,00 EUR\n</code></pre></p> <p>MoneyDeposited <pre><code>\ufffd\u0001mN;\ufffdZ\ufffd\u04e6H27cd7b01-1515-4d4f-998e-4df0e08e44a7\u001212,00 EUR\n</code></pre></p> <p>MoneyWithdrawn <pre><code>\ufffd\u0001VFtDj\ufffd\u0014xH27cd7b01-1515-4d4f-998e-4df0e08e44a7\u00106,00 EUR\n</code></pre></p>"},{"location":"reference/disk_usage.html#avro-with-kotlinx-serialized-classes","title":"Avro with KotlinX serialized classes","text":""},{"location":"reference/disk_usage.html#timings_4","title":"Timings","text":"<ol> <li>Time: 82828ms</li> <li>Time: 81669ms</li> <li>Time: 81324ms</li> <li>Time: 82468ms</li> <li>Time: 82523ms</li> </ol> <p>Resulting in an average of 82162 ms.</p>"},{"location":"reference/disk_usage.html#disk-usage_3","title":"Disk usage","text":"<pre><code>-rw-r--r-- 1 root root 1000000 Jul 12 21:59 00000000000000000000.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:02 00000000000000003165.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:04 00000000000000006330.events\n-rw-r--r-- 1 root root 1000000 Jul 12 22:05 00000000000000009495.events\n</code></pre> <p>BankAccountCreated <pre><code>\ufffd\u0001K\ufffd\ufffdX{lH27cd7b01-1515-4d4f-998e-4df0e08e44a7\u0014100,00 EUR\n</code></pre></p> <p>MoneyDeposited <pre><code>\ufffd\u0001mN;\ufffdZ\ufffd\u04e6H27cd7b01-1515-4d4f-998e-4df0e08e44a7\u001212,00 EUR\n</code></pre></p> <p>MoneyWithdrawn <pre><code>\ufffd\u0001VFtDj\ufffd\u0014xH27cd7b01-1515-4d4f-998e-4df0e08e44a7\u00106,00 EUR\n</code></pre></p>"},{"location":"reference/disk_usage.html#how-to-compare-anatomy-of-the-test-application","title":"How to compare / anatomy of the test application","text":"<p>In order to make it comparable we had to use two slightly different applications. The XML, JSON and CBOR applications were using Kotlin  Data classes for events. Those have been serialized by the corresponding Axon Serializer and sent to Axon Server. For the Avro stack we conducted two tests: one using KotlinX Avro Serialization and another using classes created by Avro Java generator. The latter generator  has a particular form of how classes look like (static builder, internal fields not reflecting the attributes) and therefor we created two  versions of event classes.</p> <p>If you look into <code>lib/</code> folder of the library you will find the following modules:</p> <ul> <li><code>fixture-events-manual</code>: hand-written Kotlin Data classes with KotlinX <code>Serializable</code> annotation, having the same signature as generated by Apache Avro Java generator</li> <li><code>fixture-events-avro-java</code>: Avro specifications, used for the generation of Java classes by Apache Avro Java Maven plugin</li> <li><code>fixture-application</code>: banking application classes (aggregate, commands, projection)</li> <li><code>comparison-tests</code>: comparison tests</li> </ul>"},{"location":"reference/disk_usage.html#run-tests-on-your-own","title":"Run tests on your own","text":"<p>Every start of application will produce one run (2010 events). In our tests we re-started the application five times. </p> <ul> <li>XStream: start <code>bank.ComparisonApplication</code> with Spring profile <code>xstream</code></li> <li>Jackson JSON: start <code>bank.ComparisonApplication</code> with Spring profile <code>jackson</code></li> <li>Jackson CBOR: start <code>bank.ComparisonApplication</code> with Spring profile <code>cbor</code></li> <li>Avro KotlinX Serialization: start <code>bank.ComparisonApplication</code> with Spring profile <code>avro</code></li> <li>Avro Java generated classes: activate Maven profile <code>avro-java</code>, rebuild the application and start <code>bank.ComparisonApplication</code> with Spring profile <code>avro</code> </li> </ul>"},{"location":"reference/disk_usage.html#additional-test-run","title":"Additional Test run","text":"<p>Macbook Pro 2021, Apple M1  Pro, 32GB. The overall performance is better, but the relative time factors are almost constant.</p> Format Average run (ms) Time Factor Average Event size (bytes) Size Factor Notes XStream 18142 1.703 21.3 4.253 No additional configuration. Jackson JSON 10714 1.006 15.3 1.227 Custom Object Mapper settings for Money. Jackson CBOR 10651 1.000 15.4 1.092 Custom Object Mapper settings for Money. Avro KotlinX 37087 3.482 15.4 (du -s / #events) 1.000 Custom type conversions for Money. Avro Java 56570 5.311 15.4 1.000 Custom type conversions for Money."},{"location":"talks/20240926_AxonIQConf_Meet-Avro/Meet%20AVRO%20-%20the%20future%20of%20serialization.html","title":"Meet AVRO - The future of serialization for CQRS/ES systems with axon","text":"<p>::: title ![[avro-logo.png]]</p> <p>Meet Apache AVRO :::</p> <p>::: subtitle The future of serialization for CQRS/ES systems using Axon Framework. :::</p> <p>-- ![[_AboutUs.md]]</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/Meet%20AVRO%20-%20the%20future%20of%20serialization.html#_challengesmd","title":"![[_Challenges.md]]","text":""},{"location":"talks/20240926_AxonIQConf_Meet-Avro/Meet%20AVRO%20-%20the%20future%20of%20serialization.html#_solutionmd","title":"![[_Solution.md]]","text":""},{"location":"talks/20240926_AxonIQConf_Meet-Avro/Meet%20AVRO%20-%20the%20future%20of%20serialization.html#_demomd","title":"![[_Demo.md]]","text":"<p>![[_Summary.md]]</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_AboutUs.html","title":"AboutUs","text":"<p>::: title Who are we? :::</p> <p>::: footer - Consultants @ holisticon - Backend developers, software architects - DDD, CQRS/ES, Axon Framework, Spring, Kotlin, Java :::</p> <p>::: left ![[simon-zambrovski-comic-gr.png]] :::</p> <p>::: right ![[jan-galinski-comic-gr.png]] :::</p> <p>--</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Challenges.html","title":"Challenges","text":"<p>::: title DDD &amp; CQRS/ES :::</p> <p>::: subtitle The Challenges :::</p> <p>--</p> <p>::: title Business Challenges :::</p> <p>::: left</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Challenges.html#design","title":"Design","text":"<ul> <li>Messages are first class citizens (Event Storming, Event Modeling)</li> <li>Your system behavior and state is expressed by <code>commands</code>, <code>events</code> and <code>queries</code></li> <li><code>Messages</code> have semantics (a <code>command</code> triggers an <code>event</code>, a <code>response</code> answers a <code>query</code>)</li> <li>Business and IT need to communicate in terms of <code>messages</code> and UBL</li> <li>Your Business does not work with <code>String</code> and <code>Integer</code>, it uses <code>CustomerId</code> and <code>Amount</code> :::</li> </ul> <p>::: right</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Challenges.html#evolution","title":"Evolution","text":"<ul> <li>You will need to identify and read <code>events</code> years from now</li> <li><code>Events</code> are stored long term in an append-only store</li> <li>If you are forced to change an <code>event</code> you need to know if it is still compatible to the previous version</li> <li></li> <li>You do not want to rely on some developer hacking everything correctly in some IDE :::</li> </ul> <p>--</p> <p>::: title IT Challenges :::</p> <p>::: left</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Challenges.html#development","title":"Development","text":"<ul> <li>Your system will consist of multiple micro-services (polyglot?) </li> <li>You will need to share your <code>commands</code>, <code>events</code> and <code>queries</code> between services and teams</li> <li>You must always use the latest revisions</li> <li>You must share serialization details as well</li> <li>The semantics of your messages and the Axon Framework require you to implement specific handler functions</li> <li>You must not make any mistakes! :::</li> </ul> <p>::: right</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Challenges.html#operation","title":"Operation","text":"<ul> <li>No overhead: high performance serialization</li> <li>Long term storage: You want to have a compact storage format that does not waste precious disk space</li> <li>If business changes events, you will have to develop smart upcasting, keeping compatibility</li> <li><code>Upcasters</code> need to be distributed as well</li> </ul>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Challenges.html#qa","title":"QA","text":"<ul> <li>You need to test <code>handlers</code>, <code>messages</code> and <code>upcasters</code> :::</li> </ul>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Demo.html","title":"Demo","text":"<p>::: title Demo Time :::</p> <p>::: subtitle aka flicker book    :::</p> <p>--</p> <p>::: title Command Model ::: </p> <p>--</p> <p>::: title Query Model :::</p> <p>--</p> <p>::: title Avro Types :::</p> <p>--</p> <p>::: title Command :::</p> <p>--</p> <p>::: title Avro Messages :::</p> <p>--</p> <p>::: title Command Handlers :::</p> <p>--</p> <p>::: title EventSouring Handlers :::</p> <p>--</p> <p>::: title Query Handlers :::</p> <p>--</p> <p>::: title Query Gateway Extension :::</p> <p>--</p> <p>::: title Let's run it! :::</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Solution.html","title":"Solution","text":"<p>::: title DDD &amp; CQRS/ES :::</p> <p>::: subtitle The Solution :::</p> <p>--</p> <p>::: title Apache <code>AVRO</code> :::</p> <p>::: subtitle plus our axon-avro extension   :::</p> <p>--</p> <p>::: title What is Apache <code>AVRO</code>? :::</p> <p>::: left</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Solution.html#self-promotion","title":"Self Promotion","text":"<p>Apache Avro\u2122 is the leading serialization format for record data, and first choice for streaming data pipelines.</p> <p>It offers excellent schema evolution, and has implementations for the JVM (Java, Kotlin, Scala, \u2026), Python, C/C++/C#, PHP, Ruby, Rust, JavaScript, and even Perl.</p> <p>:::</p> <p>::: right</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Solution.html#fact-sheet","title":"Fact sheet","text":"<ul> <li>Created in 2011, as part of Hadoop ecosystem</li> <li>Platform independent - FE/BE, LLM, Messaging, ...</li> <li>Schema-First approach for types and protocols</li> <li>Defines a Type system (int, string, long, array, record, ...)</li> <li>Defines serialization encodings (JSON, Binary, Single Object Encoding) ::: </li> </ul> <p>--</p> <p>::: title What is Apache <code>AVRO</code>? :::</p> <p>Example of a simplified bank-account context (json):</p> <p>![[BankAccountContextProtocol]]</p> <p>--</p> <p>::: title How can Apache <code>AVRO</code> help you? :::</p> <p>::: left</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Solution.html#design","title":"Design","text":"<ul> <li>Apply Schema-First approach</li> <li>Directly express your <code>commands</code>, <code>events</code> and <code>queries</code> via <code>schema</code> declaration</li> <li>Specify context behavior by Protocols  </li> <li>Use <code>messages</code> abstraction for <code>request</code>, <code>response</code> and <code>error</code></li> <li>Use central Schema-Registry</li> <li>Build your UBL using Logical Types</li> <li>Define custom value types (<code>CustomerId</code>, ...)</li> <li>Extend <code>schema</code> declaration</li> <li>Express additional properties inside the schema </li> </ul> <p>:::</p> <p>::: right</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Solution.html#evolution","title":"Evolution","text":"<ul> <li>Schema (in)compatibility matrix</li> <li>Separation of <code>writer</code> and <code>reader</code> schema</li> <li>Different levels of forward/backward compatibility</li> <li>Schema fingerprint embedded in messages</li> <li>Ability to look up the <code>writer-schema</code></li> <li>Simplified upcasting</li> <li>Conflicts can be determined on <code>schema</code> level</li> <li>The intermediate representation (<code>GenericRecord</code>) understands the underlying <code>schema</code> (no mental model mismatch) :::</li> </ul> <p>--</p> <p>::: title How can our <code>AXON-AVRO</code> help? :::</p> <p>::: left</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Solution.html#development","title":"Development","text":"<ul> <li>Do not share versioned libraries between teams, use schema registry</li> </ul> <ul> <li>Generate Core API</li> <li>(data) Classes for <code>commands</code>, <code>events</code>, <code>queries</code>, <code>responses</code> and <code>errors</code> </li> <li>Generate Command Model</li> <li><code>interfaces</code> for <code>CommandHandler</code> and <code>EventSourcingHandler</code> functions</li> <li>Custom <code>CommandGateway</code> for type safe publishing</li> <li>Generate Query Model</li> <li><code>interfaces</code> for <code>QueryHandler</code> and <code>EventHandler</code> functions</li> <li><code>QueryGateway</code> extensions for type safe and reliant <code>query</code>/<code>response</code> clients :::</li> </ul> <p>::: right</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Solution.html#operation","title":"Operation","text":"<ul> <li>Use pluggable <code>AVRO</code> serializer</li> <li>Auto configurable </li> <li>At least as fast as <code>jackson</code></li> <li>Compact storage via <code>Single Object Encoded</code> bytes encoding</li> <li>Reduce disk usage by at least 10% &lt; <code>jackson cbor</code></li> <li>Axon Dashboard Server plugin to read events as <code>json</code></li> </ul>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Solution.html#qa","title":"QA","text":"<ul> <li>Avoid making any mistakes because boilerplate is generated from <code>schema</code> :::</li> </ul>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Summary.html","title":"Summary","text":"<p>::: title Summary :::</p> <p>::: subtitle</p> <p>:::</p> <p>--</p> <p>::: title Summary :::</p> <p>::: left</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Summary.html#what-we-showed-today","title":"What we showed today","text":"<ul> <li>Schema-First is a good idea for DDD/UBL and Business/IT-Alignment</li> <li>Apache <code>AVRO</code> is a powerful schema-first serialization platform</li> <li>Code-Generation improves your life by avoiding boilerplate and bugs <ul> <li>Pluggable Kotlin generator</li> </ul> </li> <li>Prototype implementation of <code>axon-avro</code> extension<ul> <li>Axon Framework Serializer</li> <li>Axon Server Plugin :::</li> </ul> </li> </ul> <p>::: right</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Summary.html#what-we-do-next","title":"What we do next","text":"<ul> <li>Implement missing MUST features</li> <li>Custom logical (value) types generator support</li> <li>Improved registry support</li> <li>Explore/implement optional ideas</li> <li>jMolecules support - annotated architecture</li> <li>Derive documentation (context map, plant-uml, markdown, ...) </li> <li>Combine with <code>FModel</code> - generate delegating aggregate</li> <li>Research</li> <li>Use it in polyglot environments (TypeScript, Python)</li> <li>Data protection and schema?</li> </ul> <p>:::</p> <p>--</p> <p>::: title</p> <p>Thank you!</p> <p>:::</p> <p>::: left</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Summary.html#links","title":"Links","text":"<p>![[qr-code-axon-avro.png|500]]</p> <pre>https://github.com/holixon/axon-avro</pre> <pre>https://avro.apache.org/</pre> <p>:::</p> <p>::: right</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/_Summary.html#questions","title":"Questions?","text":"<p> :::</p> <p>::: footer</p> <pre>https://holisticon.de/ - https://about.me/zambrovski - https://about.me/jangalinski</pre> <p>:::</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/code/BankAccountContextProtocol.html","title":"BankAccountContextProtocol","text":"<p>```json[] {   \"namespace\": \"holi.bank\",   \"protocol\": \"BankAccountContext\",   \"doc\": \"Protocol declaration for bank-account.\",   \"types\": [     {       \"name\": \"CreateBankAccountCommand\",       \"doc\": \"Creates a new bank account with given accountId\",       \"meta\": {         \"revision\": \"1\",         \"type\": \"command\"       },       \"type\": \"record\",       \"fields\": [         {           \"name\": \"accountId\",           \"type\": \"string\",           \"meta\": {             \"type\": \"association\"           }         },         {           \"name\": \"initialBalance\",           \"type\": \"int\",           \"default\": 0         }       ]     },     {       \"name\": \"WithdrawMoneyCommand\",       \"doc\": \"Withdraws money from a bank account\",       \"meta\": {         \"revision\": \"1\",         \"type\": \"command\"       },       \"type\": \"record\",       \"fields\": [         {           \"name\": \"accountId\",           \"type\": \"string\",           \"meta\": {             \"type\": \"association\"           }         },         {           \"name\": \"amount\",           \"type\": \"int\",           \"default\": 0         }       ]     },     {       \"name\": \"DepositMoneyCommand\",       \"doc\": \"Deposits money from a bank account\",       \"meta\": {         \"revision\": \"1\",         \"type\": \"command\"       },       \"type\": \"record\",       \"fields\": [         {           \"name\": \"accountId\",           \"type\": \"string\",           \"meta\": {             \"type\": \"association\"           }         },         {           \"name\": \"amount\",           \"type\": \"int\",           \"default\": 0         }       ]     },     {       \"name\": \"IllegalInitialBalance\",       \"type\": \"error\",       \"fields\": [         {           \"name\": \"message\",           \"type\": \"string\"         }       ]     },     {       \"name\": \"BankAccountCreatedEvent\",       \"doc\": \"A new BankAccount has been created with initial balance.\",       \"meta\": {         \"revision\": \"1\",         \"type\": \"event\"       },       \"type\": \"record\",       \"fields\": [         {           \"name\": \"accountId\",           \"type\": \"string\"         },         {           \"name\": \"initialBalance\",           \"type\": \"int\",           \"default\": 0         }       ]     },     {       \"name\": \"MoneyDepositedEvent\",       \"doc\": \"Money was deposited from BankAccount.\",       \"meta\": {         \"revision\": \"1\",         \"type\": \"event\"       },       \"type\": \"record\",       \"fields\": [         {           \"name\": \"accountId\",           \"type\": \"string\"         },         {           \"name\": \"amount\",           \"type\": \"int\",           \"default\": 0         }       ]     },     {       \"name\": \"MoneyWithdrawnEvent\",       \"doc\": \"Money was withdrawn from BankAccount.\",       \"meta\": {         \"revision\": \"1\",         \"type\": \"event\"       },       \"type\": \"record\",       \"fields\": [         {           \"name\": \"accountId\",           \"type\": \"string\"         },         {           \"name\": \"amount\",           \"type\": \"int\",           \"default\": 0         }       ]     },     {       \"name\": \"FindCurrentBalanceByAccountIdQuery\",       \"doc\": \"Searches bank account balance for given account id.\",       \"meta\": {         \"revision\": \"1\",         \"type\": \"query\"       },       \"type\": \"record\",       \"fields\": [         {           \"name\": \"accountId\",           \"type\": \"string\"         }       ]     },     {       \"name\": \"FindAllMoneyTransfersByAccountIdQuery\",       \"doc\": \"Searches bank account money transfers for given account id.\",       \"meta\": {         \"revision\": \"1\",         \"type\": \"query\"       },       \"type\": \"record\",       \"fields\": [         {           \"name\": \"accountId\",           \"type\": \"string\"         }       ]     },     {       \"name\": \"CurrentBalance\",       \"doc\": \"Current balance of bank account.\",       \"meta\": {         \"type\": \"queryResponse\"       },       \"type\": \"record\",       \"fields\": [         {           \"name\": \"accountId\",           \"type\": \"string\"         },         {           \"name\": \"balance\",           \"type\": \"int\",           \"default\": 0         }       ]     },     {       \"name\": \"MoneyTransfer\",       \"doc\": \"Money transfer.\",       \"meta\": {         \"type\": \"queryResponse\"       },       \"type\": \"record\",       \"fields\": [         {           \"name\": \"type\",           \"type\": {             \"name\": \"MoneyTransferType\",             \"type\": \"enum\",             \"symbols\": [               \"DEPOSIT\",               \"WITHDRAWAL\"             ]           }         },         {           \"name\": \"balance\",           \"type\": \"int\",           \"default\": 0         }       ]     },     {       \"name\": \"MoneyTransfers\",       \"type\": \"record\",       \"fields\": [         {           \"name\": \"items\",           \"type\": {             \"type\": \"array\",             \"items\": \"MoneyTransfer\",             \"default\": []           }         }       ]     }   ],</p> <p>\"messages\": {     \"createBankAccount\": {       \"doc\": \"Creates a new bank account.\",       \"meta\": {         \"group\": \"BankAccountAggregate\",         \"type\": \"deciderInit\"       },       \"request\": [         {           \"name\": \"command\",           \"type\": \"CreateBankAccountCommand\"         }       ],       \"response\": \"BankAccountCreatedEvent\",       \"errors\": [         \"IllegalInitialBalance\"       ]     },     \"withdrawMoney\": {       \"meta\": {         \"group\": \"BankAccountAggregate\",         \"type\": \"decider\"       },       \"request\": [         {           \"name\": \"command\",           \"type\": \"WithdrawMoneyCommand\"         }       ],       \"response\": \"MoneyWithdrawnEvent\"     },     \"depositMoney\": {       \"meta\": {         \"group\": \"BankAccountAggregate\",         \"type\": \"decider\"       },       \"request\": [         {           \"name\": \"command\",           \"type\": \"DepositMoneyCommand\"         }       ],       \"response\": \"MoneyDepositedEvent\"     },</p> <pre><code>\"findCurrentBalanceForAccountId\": {\n  \"meta\": {\n    \"group\": \"BankAccountProjection\",\n    \"type\": \"query\"\n  },\n  \"request\": [\n    {\n      \"name\": \"query\",\n      \"type\": \"FindCurrentBalanceByAccountIdQuery\"\n    }\n  ],\n  \"response\": [\n    \"null\",\n    \"CurrentBalance\"\n  ]\n},\n\"findAllMoneyTransfersForAccountId\": {\n  \"meta\": {\n    \"group\": \"BankAccountProjection\",\n    \"type\": \"query\"\n  },\n  \"request\": [\n    {\n      \"name\": \"query\",\n      \"type\": \"FindAllMoneyTransfersByAccountIdQuery\"\n    }\n  ],\n  \"response\": \"MoneyTransfers\"\n}\n</code></pre> <p>} } ```</p>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/notes/mermaid%20set%20based%20validation.html","title":"Mermaid set based validation","text":"<pre><code>sequenceDiagram\n    Client-&gt;&gt;Interceptor: CreateAccount(axon@iq)\n    Interceptor-&gt;&gt;EmailRepository: exists(axon@iq)\n    EmailRepository--&gt;&gt;Interceptor: false\n    Interceptor -&gt;&gt; Aggregate: CreateAccount(axon@iq)\n    Aggregate -&gt;&gt; EmailEventHandler: AccountCreated(axon@iq)\n    EmailEventHandler -&gt;&gt; EmailRepository: save(...,axon@iq)\n    EmailEventHandler --&gt;&gt; Aggregate: ..\n    Aggregate --&gt;&gt; Client: ..    \n</code></pre>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/notes/mermaid-milestone.html","title":"Mermaid milestone","text":"<pre><code>sequenceDiagram\n  create participant MatchAggregate\n  create participant MatchFactSummarySaga\n  MatchAggregate-&gt;&gt;MatchFactSummarySaga: MatchCreated\n  MatchAggregate--&gt;&gt;MatchFactSummarySaga: MatchStarted\n  MatchAggregate--&gt;&gt;MatchFactSummarySaga: GoalScored\n  MatchAggregate--&gt;&gt;MatchFactSummarySaga: GoalScored\n  MatchAggregate--&gt;&gt;MatchFactSummarySaga: MatchFinished\n  MatchAggregate--&gt;&gt;MatchFactSummarySaga: MatchAccepted\n  MatchFactSummarySaga--&gt;&gt;StatisticsProjection: MatchFactSummaryEvent (rich)\n</code></pre>"},{"location":"talks/20240926_AxonIQConf_Meet-Avro/notes/mermaid-sequence-scatter.html","title":"Mermaid sequence scatter","text":"<pre><code>sequenceDiagram\n  actor S as Statistics\n  participant Q as QueryBus\n  actor A as Account\n  actor M as Match\n  actor R as Room\n  S-&gt;&gt;Q: MetaDataQuery\n  par Query Account\n    Q--&gt;&gt;A: MetaDataQuery\n  and Query Match\n    Q--&gt;&gt;M: MetaDataQuery\n  and Query Room\n    Q--&gt;&gt;R: MetaDataQuery\n  end\n  R--&gt;&gt;Q: RankingMetaData\n  M--&gt;&gt;Q: RankingMetaData\n  Q-&gt;&gt;S: List&lt;RankingMetaData&gt;\n</code></pre>"},{"location":"talks/_templates/tpl-col-1-1-footer.html","title":"Tpl col 1 1 footer","text":"<p> &lt;% title %&gt; <p></p> <p> &lt;%? left %&gt; </p> <p> &lt;%? right %&gt; </p> <p>&lt;% content %&gt;</p> <p>  &lt;% footer %&gt; </p>"},{"location":"talks/_templates/tpl-col-1-1.html","title":"Tpl col 1 1","text":"<p> &lt;% title %&gt; <p></p> <p> &lt;%? left %&gt; </p> <p> &lt;%? right %&gt; </p> <p>&lt;% content %&gt;</p>"},{"location":"talks/_templates/tpl-col-1-2.html","title":"Tpl col 1 2","text":"<p> &lt;% title %&gt; <p></p> <p> &lt;% left %&gt; </p> <p> &lt;%? right %&gt; </p> <p>&lt;% content %&gt;</p>"},{"location":"talks/_templates/tpl-col-1-center-wide.html","title":"Tpl col 1 center wide","text":"<p> &lt;% title %&gt; <p></p> <p> &lt;% content %&gt; </p>"},{"location":"talks/_templates/tpl-col-1-center.html","title":"Tpl col 1 center","text":"<p> &lt;% title %&gt; <p></p> <p> &lt;% content %&gt; </p>"},{"location":"talks/_templates/tpl-col-2-1.html","title":"Tpl col 2 1","text":"<p> &lt;% title %&gt; <p></p> <p> <p>&lt;%? left %&gt;</p> <p></p> <p> <p>&lt;%? right %&gt;</p> <p></p> <p>&lt;% content %&gt;</p>"},{"location":"talks/_templates/tpl-con-2-1-box-orig.html","title":"Tpl con 2 1 box orig","text":"<p>  &lt;% title %&gt; </p> <p></p> <p> <p>&lt;%? left %&gt;</p> <p></p> <p> <p>&lt;%? right %&gt;</p> <p></p> <p>&lt;% content %&gt;</p> <p> </p> <p> &lt;%? source %&gt; </p> <p>"},{"location":"talks/_templates/tpl-con-2-1-box-orig.html#2022-advanced-slides","title":"\u00a9 2022 Advanced Slides","text":""},{"location":"talks/_templates/tpl-con-2-1-box.html","title":"Tpl con 2 1 box","text":"<p>  &lt;% title %&gt; </p> <p> &lt;%? left %&gt; </p> <p> &lt;%? right %&gt; </p> <p>&lt;% content %&gt;</p>"},{"location":"talks/_templates/tpl-demo.html","title":"Tpl demo","text":"<p> &lt;% title %&gt;"},{"location":"talks/_templates/tpl-demo.html#content","title":"&lt;% content %&gt;","text":""},{"location":"talks/_templates/tpl-final.html","title":"Tpl final","text":"<p> &lt;% title %&gt;"},{"location":"talks/_templates/tpl-final.html#content","title":"&lt;% content %&gt;","text":"<p> &lt;%? left %&gt; </p> <p> &lt;%? right %&gt; </p>"},{"location":"talks/_templates/tpl-intermediate-subtitle.html","title":"Tpl intermediate subtitle","text":"<p> &lt;% title %&gt; &lt;% subtitle %&gt;"},{"location":"talks/_templates/tpl-intermediate-subtitle.html#content","title":"&lt;% content %&gt;","text":""},{"location":"talks/_templates/tpl-intermediate.html","title":"Tpl intermediate","text":"<p> &lt;% title %&gt;"},{"location":"talks/_templates/tpl-intermediate.html#content","title":"&lt;% content %&gt;","text":""},{"location":"talks/_templates/tpl-title-col-1-1-footer.html","title":"Tpl title col 1 1 footer","text":"<p> &lt;% title %&gt; <p></p> <p>   &lt;% content %&gt; </p> <p>   &lt;%? left %&gt; </p> <p>   &lt;%? right %&gt; </p>"},{"location":"talks/_templates/tpl-title.html","title":"Tpl title","text":"<p> Simon Zambrovski &amp; Jan Galinski - Holisticon AG </p> <p> &lt;% title %&gt; &lt;% subtitle %&gt;"},{"location":"talks/_templates/tpl-title.html#content","title":"&lt;% content %&gt;","text":""},{"location":"talks/images/Gallery.html","title":"Gallery","text":"<pre><code>path: images\ntype: horizontal\n</code></pre>"}]}